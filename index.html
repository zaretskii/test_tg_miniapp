<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мини-апп с идентификацией пользователя</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>Привет, <span id="username">пользователь</span>!</h1>
    <p>Ваш ID: <span id="userid"></span></p>
    <button onclick="sendUserData()">Отправить данные в бот</button>

    <script>
        const tg = window.Telegram.WebApp;

        // Инициализация мини-аппа
        tg.expand();

        // Получение данных пользователя
        const user = tg.initDataUnsafe.user;
        if (user) {
            document.getElementById('username').textContent = user.first_name;
            document.getElementById('userid').textContent = user.id;
        }

        const mainButton = window.Telegram.WebApp.MainButton; 
        mainButton.text = "Сохранить настройки"; 
        mainButton.enable(); 
        mainButton.show();

        mainButton.onClick( function (){
            const data = {
                id: user.id,
                name: user.first_name,
                // Добавьте другие нужные данные
            };
            tg.sendData(JSON.stringify(data)); 
        }) 

        function sendUserData() {
            const data = {
                id: user.id,
                name: user.first_name,
                // Добавьте другие нужные данные
            };
            tg.sendData("Hello World!");
        }
    </script>
</body>
</html>
